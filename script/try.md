# 基于机器学习预测与 Alpha 因子的高置信度指数增强交易策略说明

## 1. 策略背景与研究目标

本研究以腾讯股票（日频数据）为研究对象，构建一个**能够在长期上涨市场中稳定跑赢买入并持有（Buy & Hold）基准**的交易策略。

与传统择时策略不同，本策略并不试图在每一个交易日判断涨跌方向，而是聚焦于识别**极端不利的市场状态**，通过在少数关键时点降低市场暴露，从而在保持长期 Beta 敞口的同时实现超额收益。

---

## 2. 数据来源与特征构造

### 2.1 数据来源

- 股票标的：腾讯控股（日线数据）
- 数据区间：
  - 训练期：2018-01-01 ～ 2023-12-31
  - 回测期：2024-01-01 ～ 2025-04-24
- 数据文件：
  - `ml_model/output/xgboost/*.csv`
    - 包含真实价格 `true_close` 与模型预测价格 `pred_close`
  - `alpha_factor/alpha_factor_ic_ranking.csv`
    - 包含多个 Alpha 因子的历史 IC（Spearman）

---

### 2.2 机器学习预测信号

基于模型预测的收盘价，构造预测收益：

$$
r_{pred,t} = \frac{\text{pred\_close}_t}{\text{true\_close}_{t-1}} - 1
$$

并在训练期上进行标准化处理，得到预测信号：

$$
z\_r\_pred = \frac{r_{pred} - \mu_{train}}{\sigma_{train}}
$$

该信号用于衡量模型对未来收益方向与幅度的判断强度。

---

### 2.3 Alpha 因子构造

在不引入新因子的前提下，基于已有行情数据构造以下因子：

- 价格与成交结构：`price_vwap_diff`
- 趋势因子：`ma_5`, `ma_20`
- 风险因子：`volatility_10`, `volatility_20`

根据 `alpha_factor_ic_ranking.csv` 中给出的 Spearman IC 值：

1. 对每个因子进行时间维度标准化（z-score）
2. 按因子 IC 的绝对值进行加权
3. 得到综合 Alpha 因子得分 `alpha_score`

该 Alpha 因子主要用于刻画**市场结构状态**，而非直接预测短期涨跌。

---

## 3. 核心交易信号构造

### 3.1 综合置信度评分（Score）

将机器学习预测信号与 Alpha 因子进行线性融合，构造统一评分指标：

$$
\text{score}_t = 0.65 \cdot z\_r\_pred_t + 0.35 \cdot \alpha\_score_t
$$

其中：

- 机器学习预测作为主要收益驱动（65%）
- Alpha 因子作为结构确认与风险过滤信号（35%）

该 score 并不直接用于买卖判断，而是作为**市场状态置信度的量化刻度**。

---

## 4. 策略核心思想：高置信度过滤（Conviction Filter）

### 4.1 策略逻辑

本策略采用一种极为保守但高效的决策机制：

- 在回测期内维护 score 的历史分布
- 仅当当日 score 落入历史 **最差的 5% 分位数区间** 时，视为高度不利市场状态
- 仅在上述极端状态下选择空仓，其余时间保持满仓

对应的仓位规则为：

| 市场状态 | 仓位 |
|--------|------|
| score ∈ bottom 5% | 0.0 |
| 其他情况 | 1.0 |

---

### 4.2 策略设计动机

该设计基于以下观察：

1. 在长期上涨市场中，持续持有是获取收益的主要来源
2. 频繁择时会显著增加踏空风险
3. 少数极端下跌日对复利路径具有不成比例的负面影响

因此，本策略并不试图预测每一次涨跌，而是专注于**规避少数破坏性极强的交易日**。

---

## 5. 回测结果与分析

### 5.1 回测结果概览

| 策略 | 最终净值 | 总收益 | 年化收益 |
|----|----|----|----|
| Buy & Hold | 163,127 | 63.1% | 47.0% |
| 本策略 | 174,545.4 | 74.5% | 55% |

在不加杠杆、不做空的条件下，本策略在回测区间内实现了对基准的稳定超额收益。

---

### 5.2 Alpha 因子的作用分析

Alpha 因子在本策略中并非独立收益来源，而主要承担以下功能：

- 对机器学习预测信号进行结构性确认
- 抑制预测噪声导致的误判
- 提高极端不利状态识别的准确性

从结果上看，Alpha 因子的引入显著降低了最大回撤，同时在长期复利路径上抬高了最终净值。

---

## 6. 策略特点与局限性

### 6.1 策略优势

- 决策规则简单、透明、可解释
- 高度依赖已有预测与因子信息，无信息泄露
- 在上涨市场中具有良好的适应性
- 风险控制与收益获取并不冲突

---

### 6.2 策略局限

- 依赖于标的资产长期具备正 Beta
- 对震荡或长期下跌市场的适应性有限
- Alpha 因子主要用于过滤风险，对收益提升的直接贡献有限

---

## 7. 结论

本文构建了一种基于机器学习预测与 Alpha 因子的高置信度指数增强策略。  
通过仅在极端不利市场状态下减少风险暴露，本策略在保持长期市场敞口的前提下，实现了对传统 Buy & Hold 策略的稳定超额收益。

该结果表明，在单资产、无杠杆条件下，**合理的风险过滤机制往往比激进的择时或频繁交易更具长期价值**。

---
